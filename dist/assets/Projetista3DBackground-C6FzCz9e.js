import{R as T,r as d,j as p}from"./index-XfmLnNKm.js";const w=({performanceConfig:n,deviceCapabilities:l,courseSlug:v})=>{const m=d.useRef(null),h=d.useRef(null),u=d.useRef([]),s=d.useMemo(()=>({gridSize:n?.particleCount>100?40:60,gridOpacity:n?.staticFallback?.2:.08,wireframeCount:Math.min(n?.particleCount||15,4),animationSpeed:n?.staticFallback?0:.3,colors:{primary:"#FF6B35",secondary:"#F7931E",accent:"#FFD23F",grid:"#FF6B35",wireframe:"#F7931E"}}),[n]);class f{constructor(e){this.canvas=e,this.x=Math.random()*e.width,this.y=Math.random()*e.height,this.z=Math.random()*200-100,this.vx=(Math.random()-.5)*s.animationSpeed,this.vy=(Math.random()-.5)*s.animationSpeed,this.vz=(Math.random()-.5)*s.animationSpeed,this.rotationX=0,this.rotationY=0,this.rotationZ=0,this.rotationSpeed={x:(Math.random()-.5)*.01,y:(Math.random()-.5)*.01,z:(Math.random()-.5)*.01},this.type=["cube","pyramid","sphere"][Math.floor(Math.random()*3)],this.size=15+Math.random()*20,this.opacity=.15+Math.random()*.25}update(){s.animationSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,this.z+=this.vz,this.rotationX+=this.rotationSpeed.x,this.rotationY+=this.rotationSpeed.y,this.rotationZ+=this.rotationSpeed.z,this.x<-50&&(this.x=this.canvas.width+50),this.x>this.canvas.width+50&&(this.x=-50),this.y<-50&&(this.y=this.canvas.height+50),this.y>this.canvas.height+50&&(this.y=-50))}draw(e){e.save(),e.translate(this.x,this.y),e.globalAlpha=this.opacity,e.strokeStyle=s.colors.wireframe,e.lineWidth=1;const t=1+this.z/500;switch(e.scale(t,t),this.type){case"cube":this.drawCube(e);break;case"pyramid":this.drawPyramid(e);break;case"sphere":this.drawSphere(e);break}e.restore()}drawCube(e){const t=this.size;e.strokeRect(-t/2,-t/2,t,t);const i=t*.3;e.beginPath(),e.moveTo(-t/2,-t/2),e.lineTo(-t/2+i,-t/2-i),e.moveTo(t/2,-t/2),e.lineTo(t/2+i,-t/2-i),e.moveTo(-t/2,t/2),e.lineTo(-t/2+i,t/2-i),e.moveTo(t/2,t/2),e.lineTo(t/2+i,t/2-i),e.moveTo(-t/2+i,-t/2-i),e.lineTo(t/2+i,-t/2-i),e.lineTo(t/2+i,t/2-i),e.lineTo(-t/2+i,t/2-i),e.closePath(),e.stroke()}drawPyramid(e){const t=this.size,i=t*.8;e.strokeRect(-t/2,t/2-i,t,i),e.beginPath(),e.moveTo(-t/2,t/2-i),e.lineTo(0,-t/2),e.moveTo(t/2,t/2-i),e.lineTo(0,-t/2),e.moveTo(-t/2,t/2),e.lineTo(0,-t/2),e.moveTo(t/2,t/2),e.lineTo(0,-t/2),e.stroke()}drawSphere(e){const t=this.size/2;e.beginPath(),e.arc(0,0,t,0,Math.PI*2),e.stroke();for(let i=1;i<3;i++){const o=t*2/3*(i-1.5),r=Math.sqrt(t*t-o*o)*2;e.beginPath(),e.ellipse(0,o,r/2,r/8,0,0,Math.PI*2),e.stroke()}e.beginPath(),e.ellipse(0,0,t/4,t,0,0,Math.PI*2),e.stroke()}}const y=a=>{a.strokeStyle=s.colors.grid,a.globalAlpha=s.gridOpacity,a.lineWidth=.5;const{width:e,height:t}=a.canvas,i=s.gridSize;a.beginPath();for(let o=-i;o<t+i;o+=i)for(let r=-i;r<e+i*2;r+=i*2)a.moveTo(r,o),a.lineTo(r+i,o+i/2);for(let o=-i;o<t+i;o+=i)for(let r=0;r<e+i*2;r+=i*2)a.moveTo(r,o),a.lineTo(r-i,o+i/2);a.stroke(),a.globalAlpha=1},g=a=>{u.current=[];for(let e=0;e<s.wireframeCount;e++)u.current.push(new f(a))},c=()=>{const a=m.current;if(!a)return;const e=performance.now();if(e-(h.lastTime||0)<33.33){s.animationSpeed>0&&(h.current=requestAnimationFrame(c));return}h.lastTime=e;const i=a.getContext("2d");i.clearRect(0,0,a.width,a.height),y(i),u.current.forEach(o=>{o.update(),o.draw(i)}),s.animationSpeed>0&&(h.current=requestAnimationFrame(c))};return d.useEffect(()=>{const a=m.current;if(!a)return;const e=()=>{const t=a.getBoundingClientRect();a.width=t.width*(l?.pixelRatio||1),a.height=t.height*(l?.pixelRatio||1),a.getContext("2d").scale(l?.pixelRatio||1,l?.pixelRatio||1),g(a)};return e(),window.addEventListener("resize",e),c(),()=>{window.removeEventListener("resize",e),h.current&&cancelAnimationFrame(h.current)}},[s,l]),n?.staticFallback?p.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${s.colors.primary} 0%, ${s.colors.secondary} 50%, ${s.colors.accent} 100%)`}}):p.jsx("canvas",{ref:m,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",zIndex:5},"aria-hidden":"true"})},b=T.memo(w);export{b as default};
