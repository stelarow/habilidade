import{R as T,r as l,j as R}from"./index-XfmLnNKm.js";const k=({performanceConfig:c,deviceCapabilities:h,courseSlug:$})=>{const g=l.useRef(null),y=l.useRef(null),S=l.useRef([]);l.useRef({lines:[],cursor:0});const s=l.useMemo(()=>({snippetCount:Math.min(c?.particleCount||10,4),codeSpeed:c?.staticFallback?0:.6,terminalSpeed:c?.staticFallback?0:120,terminalLines:3,colors:{primary:"#2ED573",secondary:"#1E90FF",accent:"#70A1FF",code:"#2ED573",terminal:"#1E90FF",cursor:"#70A1FF",comment:"#2ED57360",background:"#0A0A0A"},codeSnippets:["function createApp() {","  const app = express();","  return app;","}","","const users = await User.find();","console.log(users.length);","","if (user.isActive) {","  user.lastLogin = new Date();","  await user.save();","}","","export default function App() {","  const [data, setData] = useState();","  return <div>{data}</div>;","}","","class Database {","  constructor(config) {","    this.config = config;","  }","","  async connect() {","    return this.client.connect();","  }","}","","// API Route Handler",'app.get("/api/users", async (req, res) => {',"  try {","    const users = await getUsersFromDB();","    res.json(users);","  } catch (error) {","    res.status(500).json({ error });","  }","});"],terminalCommands:["$ npm install react","$ git add .",'$ git commit -m "feat: add new feature"',"$ npm run build","$ docker build -t app .","$ kubectl apply -f deployment.yaml","$ node server.js"]}),[c]);class F{constructor(e){this.canvas=e,this.lines=[],this.x=Math.random()*(e.width+200)-100,this.y=Math.random()*e.height,this.vx=-s.codeSpeed*(.5+Math.random()*.5),this.vy=(Math.random()-.5)*.5,this.opacity=.2+Math.random()*.3,this.fontSize=12+Math.random()*3,this.lineHeight=this.fontSize+4,this.maxWidth=200+Math.random()*150;const n=Math.floor(Math.random()*(s.codeSnippets.length-8));this.lines=s.codeSnippets.slice(n,n+4+Math.floor(Math.random()*4)),this.typingProgress=0,this.typingSpeed=.5+Math.random()*1,this.fullyTyped=!1}update(){s.codeSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,this.fullyTyped||(this.typingProgress+=this.typingSpeed,this.typingProgress>=this.getTotalCharacters()&&(this.fullyTyped=!0)),this.x<-this.maxWidth-50&&(this.x=this.canvas.width+50,this.y=Math.random()*this.canvas.height,this.typingProgress=0,this.fullyTyped=!1))}getTotalCharacters(){return this.lines.join("").length}draw(e){e.save(),e.globalAlpha=this.opacity,e.font=`${this.fontSize}px 'Courier New', monospace`;let n=0;this.lines.forEach((r,p)=>{const o=this.y+p*this.lineHeight;let d=0;if(this.fullyTyped)d=r.length;else{const a=Math.max(0,this.typingProgress-n);d=Math.min(r.length,a)}const u=r.substring(0,d);if(r.startsWith("//")||r.startsWith("/*")?e.fillStyle=s.colors.comment:r.includes("function")||r.includes("class")||r.includes("const")||r.includes("let")?e.fillStyle=s.colors.primary:r.includes("await")||r.includes("async")||r.includes("return")?e.fillStyle=s.colors.secondary:e.fillStyle=s.colors.code,e.fillText(u,this.x,o),!this.fullyTyped&&n<=this.typingProgress&&this.typingProgress<n+r.length){const a=this.x+e.measureText(u).width,f=Math.sin(Date.now()*.008)*.5+.5;e.save(),e.globalAlpha=f,e.fillStyle=s.colors.cursor,e.fillRect(a,o-this.fontSize,2,this.fontSize),e.restore()}n+=r.length}),e.restore()}}const b=t=>{if(s.terminalSpeed===0)return;const e=50,n=50,r=400,p=200,o=14,d=18;t.save(),t.fillStyle=s.colors.background+"E6",t.fillRect(e,n,r,p),t.strokeStyle=s.colors.terminal,t.lineWidth=2,t.strokeRect(e,n,r,p),t.fillStyle=s.colors.terminal+"40",t.fillRect(e,n,r,25),["#FF5F56","#FFBD2E","#27CA3F"].forEach((i,m)=>{t.fillStyle=i,t.beginPath(),t.arc(e+15+m*20,n+12,6,0,Math.PI*2),t.fill()}),t.font=`${o}px 'Courier New', monospace`,t.fillStyle=s.colors.terminal;const u=Date.now(),a=Math.floor(u/3e3)%s.terminalCommands.length,f=s.terminalCommands[a],v=u%3e3/3e3,A=Math.floor(f.length*v),M=f.substring(0,A);if(t.fillText(M,e+10,n+50),v<1){const i=e+10+t.measureText(M).width,m=Math.sin(Date.now()*.008)*.5+.5;t.save(),t.globalAlpha=m,t.fillStyle=s.colors.cursor,t.fillRect(i,n+50-o,2,o),t.restore()}for(let i=1;i<=3;i++){const m=(a-i+s.terminalCommands.length)%s.terminalCommands.length,E=s.terminalCommands[m];t.save(),t.globalAlpha=1-i*.25,t.fillText(E,e+10,n+50+i*d),t.restore()}t.restore()},C=t=>{S.current=[];for(let e=0;e<s.snippetCount;e++)S.current.push(new F(t))},w=()=>{const t=g.current;if(!t)return;const e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),b(e),S.current.forEach(n=>{n.update(),n.draw(e)}),(s.codeSpeed>0||s.terminalSpeed>0)&&(y.current=requestAnimationFrame(w))};return l.useEffect(()=>{const t=g.current;if(!t)return;const e=()=>{const n=t.getBoundingClientRect();t.width=n.width*(h?.pixelRatio||1),t.height=n.height*(h?.pixelRatio||1),t.getContext("2d").scale(h?.pixelRatio||1,h?.pixelRatio||1),C(t)};return e(),window.addEventListener("resize",e),w(),()=>{window.removeEventListener("resize",e),y.current&&cancelAnimationFrame(y.current)}},[s,h]),c?.staticFallback?R.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${s.colors.primary} 0%, ${s.colors.secondary} 50%, ${s.colors.accent} 100%)`}}):R.jsx("canvas",{ref:g,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",mixBlendMode:"multiply"},"aria-hidden":"true"})},D=T.memo(k);export{D as default};
