import{R as k,r as l,j as b}from"./index-CKEPYx_w.js";const $=({performanceConfig:c,deviceCapabilities:h,courseSlug:P})=>{const g=l.useRef(null),y=l.useRef(null),S=l.useRef([]);l.useRef({lines:[],cursor:0});const s=l.useMemo(()=>({snippetCount:Math.min(c?.particleCount||10,4),codeSpeed:c?.staticFallback?0:.6,terminalSpeed:c?.staticFallback?0:120,terminalLines:3,colors:{primary:"#2ED573",secondary:"#1E90FF",accent:"#70A1FF",code:"#2ED573",terminal:"#1E90FF",cursor:"#70A1FF",comment:"#2ED57360",background:"#0A0A0A"},codeSnippets:["function createApp() {","  const app = express();","  return app;","}","","const users = await User.find();","console.log(users.length);","","if (user.isActive) {","  user.lastLogin = new Date();","  await user.save();","}","","export default function App() {","  const [data, setData] = useState();","  return <div>{data}</div>;","}","","class Database {","  constructor(config) {","    this.config = config;","  }","","  async connect() {","    return this.client.connect();","  }","}","","// API Route Handler",'app.get("/api/users", async (req, res) => {',"  try {","    const users = await getUsersFromDB();","    res.json(users);","  } catch (error) {","    res.status(500).json({ error });","  }","});"],terminalCommands:["$ npm install react","$ git add .",'$ git commit -m "feat: add new feature"',"$ npm run build","$ docker build -t app .","$ kubectl apply -f deployment.yaml","$ node server.js"]}),[c]);class F{constructor(e){this.canvas=e,this.lines=[],this.x=Math.random()*(e.width+200)-100,this.y=Math.random()*e.height,this.vx=-s.codeSpeed*(.5+Math.random()*.5),this.vy=(Math.random()-.5)*.5,this.opacity=.2+Math.random()*.3,this.fontSize=12+Math.random()*3,this.lineHeight=this.fontSize+4,this.maxWidth=200+Math.random()*150;const r=Math.floor(Math.random()*(s.codeSnippets.length-8));this.lines=s.codeSnippets.slice(r,r+4+Math.floor(Math.random()*4)),this.typingProgress=0,this.typingSpeed=.5+Math.random()*1,this.fullyTyped=!1}update(){s.codeSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,this.fullyTyped||(this.typingProgress+=this.typingSpeed,this.typingProgress>=this.getTotalCharacters()&&(this.fullyTyped=!0)),this.x<-this.maxWidth-50&&(this.x=this.canvas.width+50,this.y=Math.random()*this.canvas.height,this.typingProgress=0,this.fullyTyped=!1))}getTotalCharacters(){return this.lines.join("").length}draw(e){e.save(),e.globalAlpha=this.opacity,e.font=`${this.fontSize}px 'Courier New', monospace`;let r=0;this.lines.forEach((n,d)=>{const u=this.y+d*this.lineHeight;let o=0;if(this.fullyTyped)o=n.length;else{const a=Math.max(0,this.typingProgress-r);o=Math.min(n.length,a)}const p=n.substring(0,o);if(n.startsWith("//")||n.startsWith("/*")?e.fillStyle=s.colors.comment:n.includes("function")||n.includes("class")||n.includes("const")||n.includes("let")?e.fillStyle=s.colors.primary:n.includes("await")||n.includes("async")||n.includes("return")?e.fillStyle=s.colors.secondary:e.fillStyle=s.colors.code,e.fillText(p,this.x,u),!this.fullyTyped&&r<=this.typingProgress&&this.typingProgress<r+n.length){const a=this.x+e.measureText(p).width,f=Math.sin(Date.now()*.008)*.5+.5;e.save(),e.globalAlpha=f,e.fillStyle=s.colors.cursor,e.fillRect(a,u-this.fontSize,2,this.fontSize),e.restore()}r+=n.length}),e.restore()}}const C=t=>{if(s.terminalSpeed===0)return;const e=t.canvas.width<768,r=e?20:50,n=e?t.canvas.height-250:50,d=e?280:400,u=e?150:200,o=14,p=18;t.save(),t.fillStyle=s.colors.background+"E6",t.fillRect(r,n,d,u),t.strokeStyle=s.colors.terminal,t.lineWidth=2,t.strokeRect(r,n,d,u),t.fillStyle=s.colors.terminal+"40",t.fillRect(r,n,d,25),["#FF5F56","#FFBD2E","#27CA3F"].forEach((i,m)=>{t.fillStyle=i,t.beginPath(),t.arc(r+15+m*20,n+12,6,0,Math.PI*2),t.fill()}),t.font=`${o}px 'Courier New', monospace`,t.fillStyle=s.colors.terminal;const a=Date.now(),f=Math.floor(a/3e3)%s.terminalCommands.length,w=s.terminalCommands[f],M=a%3e3/3e3,E=Math.floor(w.length*M),R=w.substring(0,E);if(t.fillText(R,r+10,n+50),M<1){const i=r+10+t.measureText(R).width,m=Math.sin(Date.now()*.008)*.5+.5;t.save(),t.globalAlpha=m,t.fillStyle=s.colors.cursor,t.fillRect(i,n+50-o,2,o),t.restore()}for(let i=1;i<=3;i++){const m=(f-i+s.terminalCommands.length)%s.terminalCommands.length,T=s.terminalCommands[m];t.save(),t.globalAlpha=1-i*.25,t.fillText(T,r+10,n+50+i*p),t.restore()}t.restore()},A=t=>{S.current=[];for(let e=0;e<s.snippetCount;e++)S.current.push(new F(t))},v=()=>{const t=g.current;if(!t)return;const e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),C(e),S.current.forEach(r=>{r.update(),r.draw(e)}),(s.codeSpeed>0||s.terminalSpeed>0)&&(y.current=requestAnimationFrame(v))};return l.useEffect(()=>{const t=g.current;if(!t)return;const e=()=>{const r=t.getBoundingClientRect();t.width=r.width*(h?.pixelRatio||1),t.height=r.height*(h?.pixelRatio||1),t.getContext("2d").scale(h?.pixelRatio||1,h?.pixelRatio||1),A(t)};return e(),window.addEventListener("resize",e),v(),()=>{window.removeEventListener("resize",e),y.current&&cancelAnimationFrame(y.current)}},[s,h]),c?.staticFallback?b.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${s.colors.primary} 0%, ${s.colors.secondary} 50%, ${s.colors.accent} 100%)`}}):b.jsx("canvas",{ref:g,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",mixBlendMode:"multiply",zIndex:-1},"aria-hidden":"true"})},D=k.memo($);export{D as default};
