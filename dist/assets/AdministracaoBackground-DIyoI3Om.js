import{j as t}from"./backgrounds-BBBddNRD.js";import{R as i,r as a}from"./router-CWcEk_gc.js";import"./utils-jktVTUJu.js";import"./vendor-BI3NJeJA.js";const s=i.memo(({performanceConfig:i,deviceCapabilities:s,courseSlug:e})=>{const h=a.useRef(null),n=a.useRef(null),r=a.useRef([]),o=a.useRef([]),l=a.useRef([]),c=a.useMemo(()=>({documentCount:Math.min((null==i?void 0:i.particleCount)||8,6),chartCount:Math.min((null==i?void 0:i.particleCount)||6,4),particleCount:Math.min((null==i?void 0:i.particleCount)||20,15),animationSpeed:(null==i?void 0:i.staticFallback)?0:1,colors:{primary:"#6366F1",secondary:"#8B5CF6",accent:"#A78BFA",light:"#C4B5FD",background:"#1E1B4B"}}),[i]);class d{constructor(t){this.canvas=t,this.reset(),this.age=1e3*Math.random()}reset(){this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.vx=.5*(Math.random()-.5),this.vy=.5*(Math.random()-.5),this.size=15+20*Math.random(),this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=.01*(Math.random()-.5),this.opacity=.4+.4*Math.random()}update(){this.age+=1,this.x+=this.vx*c.animationSpeed,this.y+=this.vy*c.animationSpeed,this.rotation+=this.rotationSpeed*c.animationSpeed,(this.x<0||this.x>this.canvas.width)&&(this.vx*=-1),(this.y<0||this.y>this.canvas.height)&&(this.vy*=-1),this.vx+=.01*(Math.random()-.5),this.vy+=.01*(Math.random()-.5),this.vx=Math.max(-1,Math.min(1,this.vx)),this.vy=Math.max(-1,Math.min(1,this.vy))}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.globalAlpha=this.opacity,t.fillStyle=c.colors.primary,t.fillRect(-this.size/2,-this.size/2,this.size,1.2*this.size),t.strokeStyle=c.colors.light,t.lineWidth=1,t.beginPath();for(let i=0;i<3;i++){const a=-this.size/3+i*this.size/4;t.moveTo(-this.size/3,a),t.lineTo(this.size/3,a)}t.stroke(),t.restore()}}class m{constructor(t){this.canvas=t,this.reset(),this.bars=Array(4).fill().map(()=>Math.random())}reset(){this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.vx=.3*(Math.random()-.5),this.vy=.3*(Math.random()-.5),this.size=20+15*Math.random(),this.opacity=.3+.4*Math.random()}update(){this.x+=this.vx*c.animationSpeed,this.y+=this.vy*c.animationSpeed,(this.x<0||this.x>this.canvas.width)&&(this.vx*=-1),(this.y<0||this.y>this.canvas.height)&&(this.vy*=-1)}draw(t){t.save(),t.translate(this.x,this.y),t.globalAlpha=this.opacity;const i=this.size/5;for(let a=0;a<this.bars.length;a++){const s=this.bars[a]*this.size,e=(a-1.5)*i;t.fillStyle=a%2==0?c.colors.secondary:c.colors.accent,t.fillRect(e,-s/2,.8*i,s)}t.restore()}}class u{constructor(t){this.canvas=t,this.reset()}reset(){this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.vx=.8*(Math.random()-.5),this.vy=.8*(Math.random()-.5),this.size=2+4*Math.random(),this.opacity=.3+.5*Math.random(),this.life=0,this.maxLife=300+200*Math.random()}update(){this.life++,this.x+=this.vx*c.animationSpeed,this.y+=this.vy*c.animationSpeed,this.life>.8*this.maxLife&&(this.opacity*=.98),(this.life>this.maxLife||this.x<0||this.x>this.canvas.width||this.y<0||this.y>this.canvas.height)&&this.reset()}draw(t){t.save(),t.globalAlpha=this.opacity,t.fillStyle=c.colors.light,t.beginPath(),t.arc(this.x,this.y,this.size,0,2*Math.PI),t.fill(),t.restore()}}const v=()=>{const t=h.current;if(!t)return;const i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),r.current.forEach(t=>{t.update(),t.draw(i)}),o.current.forEach(t=>{t.update(),t.draw(i)}),l.current.forEach(t=>{t.update(),t.draw(i)}),c.animationSpeed>0&&(n.current=requestAnimationFrame(v))};return a.useEffect(()=>{const t=h.current;if(!t)return;const i=()=>{const i=t.getBoundingClientRect();t.width=i.width*((null==s?void 0:s.pixelRatio)||1),t.height=i.height*((null==s?void 0:s.pixelRatio)||1);t.getContext("2d").scale((null==s?void 0:s.pixelRatio)||1,(null==s?void 0:s.pixelRatio)||1),r.current=Array(c.documentCount).fill().map(()=>new d(t)),o.current=Array(c.chartCount).fill().map(()=>new m(t)),l.current=Array(c.particleCount).fill().map(()=>new u(t))};return i(),window.addEventListener("resize",i),v(),()=>{window.removeEventListener("resize",i),n.current&&cancelAnimationFrame(n.current)}},[c,s]),(null==i?void 0:i.staticFallback)?t.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${c.colors.primary} 0%, ${c.colors.secondary} 50%, ${c.colors.accent} 100%)`}}):t.jsx("canvas",{ref:h,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",zIndex:1},"aria-hidden":"true"})});export{s as default};
