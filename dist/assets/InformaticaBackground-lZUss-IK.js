import{R as z,r as h,j as y}from"./index-CQYBjRlb.js";const R=({performanceConfig:n,deviceCapabilities:l,courseSlug:x})=>{const f=h.useRef(null),g=h.useRef(null),d=h.useRef([]),u=h.useRef({drops:[]}),o=h.useRef({offset:0}),e=h.useMemo(()=>({gridSize:25,gridOpacity:0,gridSpeed:0,particleCount:Math.min(n?.particleCount||8,4),connectionDistance:80,particleSpeed:n?.staticFallback?0:.6,matrixColumns:Math.floor((window.innerWidth||800)/80),matrixSpeed:n?.staticFallback?0:.8,matrixOpacity:n?.staticFallback?0:.3,colors:{primary:"#3742FA",secondary:"#2F3542",accent:"#57606F",grid:"#3742FA20",particle:"#3742FA",connection:"#57606F40",matrix:"#3742FA",glow:"#70A1FF"},matrixChars:"01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン"}),[n]);class m{constructor(t){this.canvas=t,this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*e.particleSpeed,this.vy=(Math.random()-.5)*e.particleSpeed,this.size=1+Math.random()*1.5,this.life=1,this.decay=.002+Math.random()*.003,this.glow=Math.random()*Math.PI*2,this.glowSpeed=.02+Math.random()*.02,this.trail=[],this.maxTrailLength=5}update(){e.particleSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,(this.x<=0||this.x>=this.canvas.width)&&(this.vx*=-1),(this.y<=0||this.y>=this.canvas.height)&&(this.vy*=-1),this.x=Math.max(0,Math.min(this.canvas.width,this.x)),this.y=Math.max(0,Math.min(this.canvas.height,this.y)),this.trail.push({x:this.x,y:this.y}),this.trail.length>this.maxTrailLength&&this.trail.shift(),this.glow+=this.glowSpeed,this.life-=this.decay,this.life<=0&&(this.life=1,this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height))}draw(t){this.trail.forEach((s,r)=>{const c=r/this.trail.length*this.life*.3;t.save(),t.globalAlpha=c,t.fillStyle=e.colors.glow,t.beginPath(),t.arc(s.x,s.y,1,0,Math.PI*2),t.fill(),t.restore()}),t.save(),t.globalAlpha=this.life*.5;const a=.5+Math.sin(this.glow)*.3;t.shadowColor=e.colors.glow,t.shadowBlur=this.size*1.5*a,t.fillStyle=e.colors.particle,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill(),t.restore()}distanceTo(t){const a=this.x-t.x,s=this.y-t.y;return Math.sqrt(a*a+s*s)}}class w{constructor(t,a){this.x=t,this.y=0,this.fontSize=a,this.speed=e.matrixSpeed+Math.random()*.8,this.chars=[],this.opacity=.4+Math.random()*.2;const s=2+Math.floor(Math.random()*4);for(let r=0;r<s;r++)this.chars.push(e.matrixChars[Math.floor(Math.random()*e.matrixChars.length)])}update(t){if(e.matrixSpeed!==0&&(this.y+=this.speed,this.y>t+this.chars.length*this.fontSize&&(this.y=-this.chars.length*this.fontSize,Math.random()<.03))){const a=Math.floor(Math.random()*this.chars.length);this.chars[a]=e.matrixChars[Math.floor(Math.random()*e.matrixChars.length)]}}draw(t){e.matrixOpacity!==0&&(t.save(),t.font=`${this.fontSize}px monospace`,t.globalAlpha=e.matrixOpacity*this.opacity,this.chars.forEach((a,s)=>{const r=this.y+s*this.fontSize,c=Math.max(0,1-s/this.chars.length);t.globalAlpha=e.matrixOpacity*this.opacity*c,t.fillStyle=s===0?e.colors.glow:e.colors.matrix,t.fillText(a,this.x,r)}),t.restore())}}const M=i=>{if(e.gridOpacity===0)return;const{width:t,height:a}=i.canvas;i.save(),i.globalAlpha=e.gridOpacity,i.strokeStyle=e.colors.grid,i.lineWidth=1,o.current.offset+=e.gridSpeed,o.current.offset>=e.gridSize&&(o.current.offset=0);for(let s=-o.current.offset;s<t+e.gridSize;s+=e.gridSize)i.beginPath(),i.moveTo(s,0),i.lineTo(s,a),i.stroke();for(let s=-o.current.offset;s<a+e.gridSize;s+=e.gridSize)i.beginPath(),i.moveTo(0,s),i.lineTo(t,s),i.stroke();i.fillStyle=e.colors.particle;for(let s=-o.current.offset;s<t+e.gridSize;s+=e.gridSize)for(let r=-o.current.offset;r<a+e.gridSize;r+=e.gridSize)Math.random()<.1&&(i.shadowColor=e.colors.glow,i.shadowBlur=4,i.beginPath(),i.arc(s,r,1,0,Math.PI*2),i.fill());i.restore()},S=i=>{i.save(),i.strokeStyle=e.colors.connection,i.lineWidth=1;const t=d.current.filter(a=>a instanceof m);for(let a=0;a<t.length;a++)for(let s=a+1;s<t.length;s++){const r=t[a].distanceTo(t[s]);if(r<e.connectionDistance){const c=1-r/e.connectionDistance;i.globalAlpha=c*.2,i.beginPath(),i.moveTo(t[a].x,t[a].y),i.lineTo(t[s].x,t[s].y),i.stroke()}}i.restore()},v=i=>{d.current=[];for(let a=0;a<e.particleCount;a++)d.current.push(new m(i));u.current.drops=[];const t=14;for(let a=0;a<e.matrixColumns;a++){const s=a*20;u.current.drops.push(new w(s,t))}},p=()=>{const i=f.current;if(!i)return;const t=i.getContext("2d");t.clearRect(0,0,i.width,i.height),M(t),u.current.drops.forEach(a=>{a.update(i.height),a.draw(t)}),S(t),d.current.forEach(a=>{a.update(),a.draw(t)}),(e.particleSpeed>0||e.gridSpeed>0||e.matrixSpeed>0)&&(g.current=requestAnimationFrame(p))};return h.useEffect(()=>{const i=f.current;if(!i)return;const t=()=>{const a=i.getBoundingClientRect();i.width=a.width*(l?.pixelRatio||1),i.height=a.height*(l?.pixelRatio||1),i.getContext("2d").scale(l?.pixelRatio||1,l?.pixelRatio||1),v(i)};return t(),window.addEventListener("resize",t),p(),()=>{window.removeEventListener("resize",t),g.current&&cancelAnimationFrame(g.current)}},[e,l]),n?.staticFallback?y.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${e.colors.primary} 0%, ${e.colors.secondary} 50%, ${e.colors.accent} 100%)`}}):y.jsx("canvas",{ref:f,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",mixBlendMode:"multiply"},"aria-hidden":"true"})},F=z.memo(R);export{F as default};
