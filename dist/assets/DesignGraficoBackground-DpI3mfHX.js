import{R as B,r,j as v}from"./index-FSRk9etf.js";const E=({performanceConfig:h,deviceCapabilities:u,courseSlug:$})=>{const p=r.useRef(null),M=r.useRef(null),y=r.useRef([]),m=r.useRef([]),l=r.useRef({phase:0}),[S,b]=r.useState({x:0,y:0}),e=r.useMemo(()=>({shapeCount:Math.min(h?.particleCount||25,8),shapeSpeed:h?.staticFallback?0:1.5,brushCount:Math.min(h?.particleCount||15,6),brushSpeed:h?.staticFallback?0:2,gradientSpeed:h?.staticFallback?0:.02,gradientIntensity:h?.staticFallback?.5:1,cursorInfluence:h?.staticFallback?0:150,colors:{primary:"#FF6B9D",secondary:"#C44569",accent:"#F8B500",gradient1:"#FF6B9D",gradient2:"#FF9F43",gradient3:"#F8B500",brush:"#FF6B9D80",shape:"#C44569",glow:"#FF9F43"},shapeTypes:["circle","triangle","square","hexagon","star"]}),[h]);class R{constructor(t){this.canvas=t,this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*e.shapeSpeed,this.vy=(Math.random()-.5)*e.shapeSpeed,this.size=20+Math.random()*60,this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=(Math.random()-.5)*.05,this.opacity=.1+Math.random()*.3,this.type=e.shapeTypes[Math.floor(Math.random()*e.shapeTypes.length)],this.colorIndex=Math.floor(Math.random()*3),this.pulse=Math.random()*Math.PI*2,this.pulseSpeed=.02+Math.random()*.03,this.scale=.5+Math.random()*.5}update(){e.shapeSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,this.rotation+=this.rotationSpeed,this.pulse+=this.pulseSpeed,(this.x<=-this.size||this.x>=this.canvas.width+this.size)&&(this.vx*=-.8,this.x=Math.max(-this.size,Math.min(this.canvas.width+this.size,this.x))),(this.y<=-this.size||this.y>=this.canvas.height+this.size)&&(this.vy*=-.8,this.y=Math.max(-this.size,Math.min(this.canvas.height+this.size,this.y))),this.scale=.5+Math.sin(this.pulse)*.2)}draw(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scale,this.scale),t.globalAlpha=this.opacity;const a=[e.colors.gradient1,e.colors.gradient2,e.colors.gradient3][this.colorIndex];switch(t.shadowColor=a,t.shadowBlur=20,t.fillStyle=a,this.type){case"circle":this.drawCircle(t);break;case"triangle":this.drawTriangle(t);break;case"square":this.drawSquare(t);break;case"hexagon":this.drawHexagon(t);break;case"star":this.drawStar(t);break}t.restore()}drawCircle(t){t.beginPath(),t.arc(0,0,this.size/2,0,Math.PI*2),t.fill()}drawTriangle(t){t.beginPath();const s=this.size*.866;t.moveTo(0,-s/2),t.lineTo(-this.size/2,s/2),t.lineTo(this.size/2,s/2),t.closePath(),t.fill()}drawSquare(t){t.fillRect(-this.size/2,-this.size/2,this.size,this.size)}drawHexagon(t){t.beginPath();for(let s=0;s<6;s++){const a=s*Math.PI/3,o=Math.cos(a)*this.size/2,n=Math.sin(a)*this.size/2;s===0?t.moveTo(o,n):t.lineTo(o,n)}t.closePath(),t.fill()}drawStar(t){t.beginPath();const s=5,a=this.size/2,o=a*.5;for(let n=0;n<s*2;n++){const c=n%2===0?a:o,d=n*Math.PI/s,g=Math.cos(d)*c,f=Math.sin(d)*c;n===0?t.moveTo(g,f):t.lineTo(g,f)}t.closePath(),t.fill()}}class z{constructor(t){this.canvas=t,this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.vx=(Math.random()-.5)*e.brushSpeed,this.vy=(Math.random()-.5)*e.brushSpeed,this.points=[],this.maxPoints=8+Math.floor(Math.random()*12),this.opacity=.2+Math.random()*.4,this.width=2+Math.random()*8,this.color=[e.colors.gradient1,e.colors.gradient2,e.colors.gradient3][Math.floor(Math.random()*3)],this.life=1,this.decay=.002+Math.random()*.003;for(let s=0;s<3;s++)this.points.push({x:this.x+(Math.random()-.5)*20,y:this.y+(Math.random()-.5)*20})}update(){e.brushSpeed!==0&&(this.x+=this.vx,this.y+=this.vy,this.points.push({x:this.x,y:this.y}),this.points.length>this.maxPoints&&this.points.shift(),this.life-=this.decay,this.life<=0&&(this.life=1,this.x=Math.random()*this.canvas.width,this.y=Math.random()*this.canvas.height,this.points=[]),(this.x<=0||this.x>=this.canvas.width)&&(this.vx*=-1),(this.y<=0||this.y>=this.canvas.height)&&(this.vy*=-1))}draw(t){if(!(this.points.length<2)){t.save(),t.globalAlpha=this.opacity*this.life,t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap="round",t.lineJoin="round",t.beginPath();for(let s=0;s<this.points.length-1;s++){const a=this.points[s],o=this.points[s+1],n=s/this.points.length*this.life;if(t.globalAlpha=this.opacity*n,s===0)t.moveTo(a.x,a.y);else{const c=(a.x+o.x)/2,d=(a.y+o.y)/2;t.quadraticCurveTo(a.x,a.y,c,d)}}t.stroke(),t.restore()}}}const F=i=>{const{width:t,height:s}=i.canvas;l.current.phase+=e.gradientSpeed;const a=t/2+Math.sin(l.current.phase)*100,o=s/2+Math.cos(l.current.phase*.7)*80,n=i.createRadialGradient(a,o,0,a,o,Math.max(t,s)*.8),c=l.current.phase,d=l.current.phase+Math.PI*.5,g=l.current.phase+Math.PI,f=(Math.sin(c)+1)*.5*e.gradientIntensity,I=(Math.sin(d)+1)*.5*e.gradientIntensity,T=(Math.sin(g)+1)*.5*e.gradientIntensity;n.addColorStop(0,`${e.colors.gradient1}${Math.floor(f*255).toString(16).padStart(2,"0")}`),n.addColorStop(.5,`${e.colors.gradient2}${Math.floor(I*255).toString(16).padStart(2,"0")}`),n.addColorStop(1,`${e.colors.gradient3}${Math.floor(T*255).toString(16).padStart(2,"0")}`),i.save(),i.globalAlpha=.1,i.fillStyle=n,i.fillRect(0,0,t,s),i.restore()},k=i=>{if(e.cursorInfluence===0)return;const{x:t,y:s}=S;i.save();const a=i.createRadialGradient(t,s,0,t,s,e.cursorInfluence);a.addColorStop(0,`${e.colors.glow}40`),a.addColorStop(1,`${e.colors.glow}00`),i.fillStyle=a,i.fillRect(0,0,i.canvas.width,i.canvas.height),i.restore()};r.useEffect(()=>{const i=t=>{const s=p.current;if(!s)return;const a=s.getBoundingClientRect();b({x:t.clientX-a.left,y:t.clientY-a.top})};if(e.cursorInfluence>0)return window.addEventListener("mousemove",i),()=>window.removeEventListener("mousemove",i)},[e.cursorInfluence]);const P=i=>{y.current=[],m.current=[];for(let t=0;t<e.shapeCount;t++)y.current.push(new R(i));for(let t=0;t<e.brushCount;t++)m.current.push(new z(i))},w=()=>{const i=p.current;if(!i)return;const t=i.getContext("2d");t.clearRect(0,0,i.width,i.height),F(t),k(t),m.current.forEach(s=>{s.update(),s.draw(t)}),y.current.forEach(s=>{s.update(),s.draw(t)}),(e.shapeSpeed>0||e.brushSpeed>0||e.gradientSpeed>0)&&(M.current=requestAnimationFrame(w))};return r.useEffect(()=>{const i=p.current;if(!i)return;const t=()=>{const s=i.getBoundingClientRect();i.width=s.width*(u?.pixelRatio||1),i.height=s.height*(u?.pixelRatio||1),i.getContext("2d").scale(u?.pixelRatio||1,u?.pixelRatio||1),P(i)};return t(),window.addEventListener("resize",t),w(),()=>{window.removeEventListener("resize",t),M.current&&cancelAnimationFrame(M.current)}},[e,u]),h?.staticFallback?v.jsx("div",{className:"absolute inset-0 opacity-10",style:{background:`linear-gradient(135deg, ${e.colors.primary} 0%, ${e.colors.secondary} 50%, ${e.colors.accent} 100%)`}}):v.jsx("canvas",{ref:p,className:"absolute inset-0 w-full h-full pointer-events-none",style:{background:"transparent",mixBlendMode:"multiply"},"aria-hidden":"true"})},x=B.memo(E);export{x as default};
